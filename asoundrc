# I used this at some point to boost the signal for something. I think it was
# voip from an xbox.
#
#pcm.boost {
#	type	softvol
#	slave.pcm	"default"
#	control.name	"Softmaster"
#	control.card	0
#	max_dB	48.0
#}
#

# https://jira.skype.com/browse/SCL-810
# http://wiki.cyberleo.net/wiki/KnowledgeBase/AlsaEqual

defaults.pcm.!card 2
defaults.ctl.!card 2
defaults.pcm.!device 0
defaults.ctl.!device 0

ctl.equal {
  type equal;
}

# We parameterize this as well since Skype tries everything in this file and
# will attempt to load the 64-bit caps library via the alsaequal plugin. In
# reality, this device is only used with type "equal", but we need this hack to
# fix Skype.
pcm.equal {
  @args [ TYPE ]
  @args.TYPE {
    type string
    default {
      @func getenv
      vars [ ALSA_PCM ]
      default "equal"
    }
  }
  type $TYPE;
  # ipc_key 1025
  slave.pcm "plug:dmix"
}

pcm.dsnooped {
  type dsnoop
  ipc_key 1027
  slave.pcm "hw:3,0"
}

# The alsaequal plugin is not compatible with 32-bit programs on amd64, so it
# will crash them with the following message:
#
#   Failed to load plugin "/usr/lib/ladspa/caps.so": /usr/lib/ladspa/caps.so: wrong ELF class: ELFCLASS64
#
# To get around this, the asymed definition takes two parameters: PLAY and
# CAPT, to direct the slave PCMs. These are controlled either by arguments
# in the slave definition (i.e. slave.pcm "asymed:dmix,dsnoop" ), or by
# environment variables (ALSA_ASYM_PLAY=dmix ALSA_ASYM_CAPT=dsnoop aplay ...)
pcm.asymed {
  @args [ TYPE ]
  @args.TYPE {
    type string
    default {
      @func getenv
      vars [ ALSA_PCM ]
      default "equal"
    }
  }
  type asym;
  playback.pcm $TYPE;
  capture.pcm "dsnooped";
}

pcm.!default {
  type plug;
  slave.pcm asymed;
}
